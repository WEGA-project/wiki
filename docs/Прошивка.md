## Установка Visual Studio Code (vscode) и прошивка
<video controls width="100%"><source src="assets/Vscode1.mp4" type="video/mp4">Your browser does not support the video tag.</video>
### Шаг 1
Скачать и установить vscode

Если у вас <code>Windows OS</code>, то скорее всего потребуется установить драйвера, которые можно скачать здесь

В большинстве случаев подходят CP210x Universal Windows Driver

### Шаг 2
Запускаем <code>vscode</code>  идем в <code>extensions</code> и устанавливаем <code>platformio</code>.

### Шаг 3
Открываем папку с проектом.

### Шаг 4
Копируем файл <code>src/pre.h.rename</code> вставляем в ту же папку и переименовываем новый файл в <code>pre.h</code>.

Открываем  <code>pre.h</code>.

- Обновляем <code>ssid</code> - имя вашей сети
- Обновляем <code>password</code> - пароль для вашего WiFi
- Обновляем <code>String wegaapi</code> - URL для подключения к <code>WEGA-API</code>
- Обновляем <code>String wegaauth</code> - token для подключения к <code>WEGA-API</code>
- Обновляем <code>String wegadb</code> - имя базы данных для хранения данных с <code>WEGABOX</code>
- Обновляем <code>long freqdb</code> - частота отправки данных в базу в секундах
- Обновляем <code>#define HOSTNAME</code> - Имя системы и DDNS .local

**Обновляем список датчиков, которые подключены к <code>WEGABOX</code>**

- 1 значит датчик включен(подключен)

- 0 значит датчик выключен(не подключен)

- Пример <code>#define c_DS18B20 1</code> - Цифровой датчик температуры для шины 1-Wire

**Что дальше**

- Сохраняем код
- Нажимаем <code>build</code>, что бы проверить что прошивка собирается

Если все хорошо, то в терминале будет что-то подобное.

Если в терминале видим <code>SUCCESS</code> то подключаем <code>ESP32</code> через консольный кабель.

Нажимаем кнопку  <code>Upload</code> и заливаем проект на <code>ESP32</code>

В большинстве случаев <code>platformio</code> найдет подключеное устроиство через консольный кабель автоматически, если этого не произошло то добавляем строчку в самом низу в файле <code>platformio.ini</code>

Для <code>Widows OS</code> систем <code>upload_port = COM[13]</code> -  после прошивки <code>ESP</code> по консольному кабелю строчку необходимо удалить.

Для <code>Linux</code> и <code>MacOS</code> систем <code>upload_port = /dev/ttyUSB*</code> -  после прошивки <code>ESP</code> по консольному кабелю строчку необходимо удалить.

Больше про настройки <code>upload_port</code> можно прочитать здесь

При условии, что сборка компонентов была выполнена правильно, то как только прошивка будет загружена на плату и произойдет перезагрузка на плате поднимется веб сервер. Вам необходимо найти <code>IP</code> адрес, который получил  <code>WEGABOX</code>. Это возможно сделать через веб интерфей роутера.

## Прошивка по Wi-Fi
В дальнейшем, если будет желание или необходимость перепрошивки <code>ESP</code> это можно будет сделать через Wi-Fi.

Для этого нужно будет раскоментировать строчку в <code>platformio.ini</code> и указать свой <code>IP</code> адрес  <code>WEGABOX</code>.
----
